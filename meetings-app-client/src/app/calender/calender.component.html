<div class="container mt-4">
  <h2>Calendar</h2>
  <hr class="underline"/>

  <div class="calendar-header d-flex justify-content-between align-items-center mb-3">
    <div class="selected-date">
      <span class="date-display">{{ selectedDate | date: 'dd MMMM yyyy' }}</span>
      <br />
      <span class="day-display">{{ selectedDate | date: 'EEEE' }}</span>
    </div>

    <div class="calendar-date-picker input-group">
      <input
        id="meetingDate"
        type="date"
        class="form-control"
        (input)="onDateChange($event)"
        [value]="formatDate(selectedDate)"
      />
    </div>
  </div>

  <div class="calendar-grid">
    
    <div *ngFor="let hour of hours" class="hour-slot-wrapper d-flex align-items-center">
      <div class="hour-label">
        {{ hour.label }}
      </div>

      <div class="hour-slot position-relative">
        <ng-container *ngIf="hasMeetingAt(hour.value)">
          <div
            class="meeting"
            *ngFor="let meeting of getMeetingsAt(hour.value)"
            [ngStyle]="getMeetingStyles(meeting)"
          >
            <div class="meeting-label">
              <strong>{{ meeting.name }}</strong>
            </div>
            <hr class="m-1">
            <div class="meeting-attendees">
              <strong>Attendees:</strong> 
              <span *ngFor="let email of meeting.attendees; let isLast = last">
                {{ email }}<span *ngIf="!isLast"> | </span>
              </span>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>